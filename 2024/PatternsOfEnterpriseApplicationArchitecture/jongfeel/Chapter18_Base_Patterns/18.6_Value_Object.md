### 값 객체

> 금액이나 날짜 범위와 같이 동등성의 개념이 식별자에 기반을 두지 않는 작고 간단한 객체

참조와 값을 구분해서 생각하면 유용하다.
값 객체는 일반적으로 더 작고, 순수한 객체지향이 아닌 언어에서 제공되는 기본형(primitive type)과 비슷하다.

#### 작동 원리

참조 객체와 값 객체의 차이를 명확하게 정의하기는 까다로운 일일 수 있다.

두 객체의 중요한 차이는 두 객체가 동등성을 처리하는 방식에 있다.
참조 객체는 식별자를 사용한다. 이는 ID나 데이터베이스의 기본 키와 같은 개념이다.
반면 값 객체는 클래스 안의 필드 값을 기준으로 동등성을 판단한다.

값 객체는 작고 쉽게 생성할 수 있으므로 참조가 아닌 값으로 전달하는 경우가 많다.

대부분 값 객체를 위한 기능을 따로 제공하지 않는다.
그래서 올바르게 쓰려면 읽기 전용으로 만든 후에 필드를 변경할 수 없게 한다.
이것은 별칭 버그(aliasing bug)를 방지하기 위한 것이다.
별칭 버그는 두 객체가 동일한 값 객체를 공유할 때 둘 중 한 소유자가 객체의 값을 변경하는 것을 의미한다.

값 객체는 완성된 레코드로 저장해서는 안 되며,
`포함 값` 또는 `직렬화 LOB`를 대신 사용해야 한다.
값 객체는 작으므로 값 객체의 값을 사용해 SQL 쿼리를 수행할 수 있는 `포함 값`이 일반적으로 가장 좋은 선택이다.

이진 직렬화 작업이 많은 경우 값 객체의 직렬화를 최적화해서 성능을 개선할 수 있다.

값 객체에 대한 예제로는 `금액`을 참고한다.

##### .NET 구현

.NET에서는 값 객체를 기본 지원한다.
C#은 객체를 클래스 대신 구조체로 선언하면 값 객체로 지정할 수 있다.

#### 사용 시점

식별자가 아닌 다른 기준을 바탕으로 동등성을 판단하는 경우 값 객체를 사용한다. 
생성하기 쉬운 작은 객체에 값 객체를 사용하는 걸 고려하면 좋다.

##### 이름 충돌

값 객체라는 용어와 관련해 용어가 충돌하는 경우가 있다.
J2EE 커뮤니티[Alur et al.] 에서는 `데이터 전송 객체`를 의미하는 용어로 "값 객체(value object)"를 사용하기 시작해 패턴 커뮤니티에 작은 파장을 일으켰다.
[Alur et al.] 에서는 전송 객체(transfer object)라는 용어를 대신 사용하고 있다.