### 모델 뷰 컨트롤러

> 사용자 인터페이스 상호작용을 세 가지 독립적인 역할로 분할한다.

![image](https://github.com/jongfeel/BookReview/assets/17442457/3bce17f0-1330-4b8f-9e97-6dc2385635af)

모델 뷰 컨트롤러(MVC, Model View Controller)는 가장 많이 언급되고 동시에 오해하는 경우도 가장 많은 패턴 중 하나다.
이 패턴은 1970년대 후반 트뤼그베 레엔스케우(Trygve Reenskaug)가 스몰토크 플랫폼용 프레임워크로 처음 개발했다.
그 후 대부분의 UI 프레임워크와 UI 설계에서 중요한 역할을 했다.

#### 작동 원리

MVC에서는 세 가지 역할을 구분한다.

모델(model)은 도메인에 대한 정보를 나타내며, UI에 직접 사용하지 않은 모든 데이터와 동작을 포함하는 비시각적인 객체다.
`도메인 모델`에 위치하며 UI 관련 기능을 포함하지 않는 `트랜잭션 스크립트` 모델이라고 간주할 수 있다.

뷰(view)는 UI에서 모델을 표시하는 역할을 하며. 정보에 대한 변경 사항은 컨트롤러가 처리한다.

컨트롤러(controller)는 사용자로부터 입력을 받고, 모델을 조작하며, 뷰를 적절하게 업데이트 한다. UI는 뷰와 컨트롤러의 조합으로 작동한다.

MVC의 핵심 개념은 프레젠테이션을 모델에서 분리하고 컨트롤러를 뷰에서 분리하는 두 가지 분리다.

프레젠테이션을 모델로부터 분리하는 것은 바람직한 소프트웨어 설계에서 가장 기본 개념이며, 중요한 이유는 다음과 같다.

- 프레젠테이션과 모델은 서로 다른 관심사이다.
  - 뷰를 개발할 때는 UI의 메커니즘을 주로 고려하며 사용자 인터페이스를 배치하는 데 집중한다.
  - 모델을 개발할 때는 비즈니스 정책이나 데이터베이스 상호작용 등을 고려한다.
  - 개발자는 둘 중 한 분야를 선호하고 전문화한다, 따라서 서로 다른 라이브러리를 사용한다.
- 동일한 모델을 상황에 따라 다르게 표현할 수 있는데, 동일한 모델을 통해 리치 클라이언트, 웹 브라우저, 원격 API, CLI등을 모두 제공할 수 있다.
- 시각적이지 않은 객체는 테스트하기 쉽다. GUI 스트립팅 툴과 같은 불편한 방법을 사용하지 않고 도메인 논리를 쉽게 테스트할 수 있다.

이 분리에서 중요한 건 한 방향으로 의존성이 생긴다는 점이다. (모델 -> 프레젠테이션)
모델은 프레젠테이션을 알 필요가 없다. 이렇게 하면 작업이 간소화되고 새로운 프레젠테이션을 추가하기가 쉽다.

이 원칙은 한 가지 문제를 해결해야 하는데, 한 화면에 한 모델의 여러 프레젠테이션이 동시에 표시되는 리치 클라이언트가 있다.
한 프레젠테이션에서 모델을 변경하면 다른 프레젠테이션에서 변경 사항을 반영해야 하므로 이벤트 전파나 관찰자 패턴[Gang of Four]을 구현해야 한다. 프레젠테이션은 모델의 관찰자 역할을 하며 모델이 변경되면 이벤트를 통해 프레젠테이션이 새로운 정보로 업데이트 하게 한다.

뷰와 컨트롤러의 분리는 중요도가 약간 낮다. 스몰토크에서는 실제로 뷰와 컨트롤러를 분리하지 않는다.
편집 가능/불가능 기능을 구현하기 위해 뷰 한개, 컨트롤러 두 개를 사용하며 컨트롤러는 뷰에 대한 전략[Gang of Four]의 역할을 한다.
하지만 실제 시스템에서는 뷰 하나, 컨트롤러 하나가 사용되므로 이런 방식으로 분리하지는 않는다.

GUI 프레임워크에서 뷰와 컨트롤러는 결합되어 있기에 MVC에 대한 오해를 많이 가져왔다.
`애플리케이션 컨트롤러` 처럼 모델과 뷰 사이에 컨트롤러를 배치하는게 일반적이지만, 다른 의미로 사용하는 "컨트롤러" 라는 용어는 혼란의 여지가 있다.

#### 사용 시점

프레젠테이션과 모델의 분리는 소프트웨어 설계 원칙 중 하나이며, 이렇게 하지 않으려면 모델에 실질적인 동작이 없는 단순한 시스템을 구축하는 경우뿐이다.

뷰와 컨트롤러의 분리는 확실하게 도움이 되는 경우에만 분리한다.
웹 프론트는 분리되는 경우가 일반적이지만, 리치 클라이언트 시스템은 분리되는 경우가 거의 없다.