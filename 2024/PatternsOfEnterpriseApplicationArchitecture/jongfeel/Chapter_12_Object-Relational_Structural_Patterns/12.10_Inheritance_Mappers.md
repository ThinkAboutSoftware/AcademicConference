### 상속 매퍼

> 상속 계층을 처리하는 데이터베이스 매퍼를 구성하는 구조

![image](https://github.com/jongfeel/BookReview/assets/17442457/f8eb16c2-4379-40b0-8c28-a54f43089259)

메모리 상의 객체지향 상속 계층을 관계형 데이터베이스로 매핑할 때 데이터를 데이터베이스에 저장하고 로드하는 코드의 양을 최소화한다.
상위 클래스나 하위 클래스를 저장하거나 로드하는 추상 및 구현 매핑 동작을 제공하면 좋다.

이런 동작의 세부 사항은 상속 매핑 체계들 마다 다르지만 전반적인 구조는 모든 체계에 동일하게 적용된다.
상속 매핑 체계: `단일 테이블 상속`, `클래스 테이블 상속`, 구현 테이블 상속`

#### 작동 원리

계층과 함께 매퍼를 구성해 도메인 클래스별로 매퍼를 통해 도메인 클래스의 데이터를 저장하고 로드할 수 있다.
이러면 매핑을 한 지점에서 변경할 수 있다.
계층에서 구현 객체를 매핑하는 방법을 아는 구현 매퍼에서는 잘 동작하지만, 경우에 따라 추상 클래스에 대한 매퍼가 필요할 수도 있다.
실제 계층 외부에 있는 매퍼에서 적절한 구현 매퍼로 위임하도록 구현한다.

검색 메서드는 구현 클래스를 반환하므로 구현 하위 클래스에서 선언된다.
예로 볼링 선수 매퍼의 검색 메서드는 추상이 아닌 볼링 선수를 반환한다.
동적 타입 언어는 이 문제를 신경쓰지 않아도 되지만
정적 타입 언어는 메서드의 반환 형식을 바꾸지 못하므로 각각 반환 형식을 선언하는 검색 작업을 상속할 수 없다.
물론 추상 형식을 쓰면 되지만 클래스 사용자가 하향 변환을 해야 하므로 사용하지 않는 게 좋다.

검색 메서드 동작이나 삽입, 업데이트, 삭제 메서드의 경우는 앞서 살펴본 테이블 상속 체계에서 이미 살펴 봤으므로 건너 뛴다.

#### 사용 시점

상속 기반 데이터베이스 매핑에 적용한다.
상위 클래스 매핑 코드를 구현 매퍼로 복제하던가
선수의 인터페이스를 추상 선수 매퍼 클래스로 끼워 넣던가 한다.

구현 매퍼로 복제하는 건 잘못된 방법이며
추상 선수 매퍼 클래스는 코드가 복잡하고 혼란스러워진다.

결국 이 패턴을 대체할 수 있는 패턴 중에는 권장할 만한 것이 없다.