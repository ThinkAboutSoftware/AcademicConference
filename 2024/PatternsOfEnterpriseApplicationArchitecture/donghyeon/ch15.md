# ch15. 분산 패턴

## 논의

저자는 데이터 간에 공통점이 많은 경우 하나를 사용하지만 특정 요청을 처리하는데 적합하다고 판단하면 다른 데이터전송 객체 사용한다고 했는데요.
여러분들은 데이터 전송 객체를 얼마나 세분화해서 관리하시나요? 세분화하는 기준이 있나요?

## 내용

- 원격 파사드
  - 가는 입자 객체에 대한 굵은 입자 파사드를 제공해 네트워크 상에서 효율 향상
  - 주의점!!
    - 가는 입자 객체는 원격 인터페이스를 포함하지 않음
    - 원격 파사드는 도메인 논리를 포함하지 않음
  - 정보를 대량으로 전송하려면 회선을 통해 쉽게 전송할 수 있는 형식이어야 함
    - 직렬화가 가능한 경우 복사본을 만들어 직접 전송
    - 직렬화가 불가능한 경우 데이터 전송 객체를 기본 전송 박식으로 사용
      - 직렬화가 불가능한 경우
        - 도메인 클래스를 여러 프로세스에서 복제하고 싶지 않음
        - 복잡한 관계 구조 때문에 도메인 모델의 일부를 직렬화하기가 어려움
        - 클라이언트가 전체 모델이 아닌 단순화된 부분 집합을 원함
  - 원격 파사드를 얼마나 세분화 할 것인가?
    - 저자는 적은 수의 원격 파사드를 사용(안에는 많은 메서드)하는 것을 선호
  - 원격 파사드는 상태 저장일수도 상태 비저장일수도 있음
    - 상태 저장 vs 상태 비저장
      - 상태 저장: 자체 상태를 저장할 수 있으므로 서버 세션 상태를 구현하기는 쉽지만 성능문제 발생 가능성
      - 상태 비저장: 풀링을 통해 특히 B2C 환경에서 리소스 절약, 효율 상승
  - 그 외 원격 파사드의 장점
    - 원격 파사드의 메서드는 보안을 적용하기에 좋은 위치
    - 원격 파사드의 메서드는 트랜잭션 제어를 적용하기에 좋은 위치
  - vs 서비스 계층
    - 서비스 게층은 원격이 아니어도 되므로 가는 입자 메서드만 가질 필요가 없음
- 데이터 전송 객체
  - 메서드 호출 횟수를 줄이기 위해 프로세스 간에 데이터를 전송하는 객체
  - 직렬화가 가능해야함
  - 원격 호출의 지연 비용을 감안하면 여러 번 호출하는 것보다 필요 이상의 데이터를 전송하는 것이 낫다.
    - 여러 번 호출: 각 호출에 어떤 데이터가 전송되는지 확인이 쉽지만 데이터 전송 객체가 많아짐
    - 한 번 호출: 해야 하는 작업은 줄지만 정보가 어떻게 전송되는지 알아보기 힘듬
    - 저자는 데이터 간에 공통점이 많은 경우 하나를 사용하지만, 특정 요청을 처리하는데 적합하다고 판단하면 다른 전송 객체 사용
