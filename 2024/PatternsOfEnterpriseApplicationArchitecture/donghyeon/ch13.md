# ch13. 객체 - 관계형 메타데이터 매핑 패턴

## 논의

저는 사용하는 프레임워크가 어떤 식으로 리플렉션을 사용하는지를 파악할 때 빼고는 리플렉션 프로그래밍을 해본 적이 없는데요.
실제로 리플렉션 프로그래밍을 해보신 경험이 있으신가요?

## 내용

- 메타데이터 매핑(Metadata Mapping)
    - 매핑을 간단한 표 형식으로 정의하고 범용 코드를 통해 이를 처리함으로써 CRUD를 수행
    - 메타데이터 정보를 실행 코드로 제공하는 방법
        - 코드 생성(code generation)
            - 메타데이터를 입력으로 받고 매핑을 수행하는 클래스의 소스코드를 출력하는 프로그램
            - 일반적으로 컴파일 전에 빌드 프로게스 중에 완전하게 생성
        - 리플렉션 프로그래밍(reflective program)
            - 메타데이터 파일에서 필드와 메서드 이름을 읽고 이 정보를 기준으로 매핑
            - 디버깅하기 어렵지만 매우 유연한 방법
- 쿼리 객체(Query Object)
    - 인터프리터 역할. 객체의 구조를 바탕으로 SQL 쿼리를 구성할 수 있게 해줌
    - 쿼리 생성시 DB가 아닌 객체(클래스와 필드)를 참조 -> DB 스키마에 의존하지 않음
- 리포지토리(Repository)
    - 도메인과 데이터 매핑 계층 간의 깔끔한 분리와 단방향 의존이 가능하도록 함
    - 리포지토리는 내부적으로 메타데이터 매핑과 쿼리 객체를 결합해 SQL 코드를 생성
