# 4장 깊은 통찰을 향한 리팩토링

# 논의 내용

논의 내용에 대한 배경 설명
- 책에서 모델을 계속 해서 개선(refactor) 해야 한다 라는 말에 고개를 끄덕이면서도, 실제로 제가 회사에서 어떻게 하고 있나를 생각 해보았을 때, 결론은 **초반에만** 도메인 전문가로 부터 지식을 끄집어 내어 나름의 모델링을 한다는 것입니다. 즉 초반에 요구사항을 정의할 때, 잠깐동안만 도메인 전문가의 암묵적 지식을 명시적 지식으로 모델에 반영하는 것이지요. 결국에 시간이 지나면, 더이상 모델을 개선(refactor)는 하지 않고, 도메인 전문가와 구성원들은 다시 암묵적 지식으로 가지게 된다는 것 입니다. 이는 코드와 일치하지않는 deprecated된 위키문서, 기획서 등을 통해서도 흔히 볼 수 있습니다.

즉, 모델을 개선(refactor) 하지 않는 다는 말은 도메인과 관련된 구성원들이 가지는 암묵적 지식이 늘어난다는 말과도 동일하다고 볼 수 있을 것 같습니다. 그래서, 새로운 팀원이 온보딩을 해야할 때, 기존의 문서 혹은 코드와 더불어서, 해당 도메인의 담당자와 질문과 답변 과정을 또 거쳐야할 수밖에 없고 이는 계속적으로 반복되는것 같습니다. 이론적으로 보면, 도메인과 관련된 구성원들의 암묵적 지식들이 도메인 모델에 모두 반영이 되어있다면, 해당 도메인을 모르는 사람도, 도메인 모델만 보고도 이해할 수 있어야 하는데, 현실적으로는 이 도메인 모델이 잘 관리되지 않다보니, 암묵적 지식이 어쩔 수 없이 계속 생기게 되는 것 같습니다

논의 내용
1. 도메인 모델에 구성원들의 암묵적 지식을 모두 명시적으로 반영할 수 있도록 하는, 구체적인 방법이 있다면 어떤 것이 있을까요? 현실적이지 않은 방법이라도 본인이 생각하는 방법이 있다면 아이디어를 내서, 얘기해보면 좋을것 같습니다
2. 위의 1번 에서 고민해본 방법이 현실적일 수도, 현실적이지 않을 수도 있을 것 같습니다. 현실적으로 가능하다면, 혹은 현실적으로 불가능하다면, 왜 그렇게 생각하는지 같이 얘기 나눠보면 좋을것 같습니다

# 키워드

1. 리팩터링
2. 불변식(Invariant)
3. 제약조건(Constraint)
4. 처리(Process)
5. 명세(Specification)

# 내 생각

- 이 장에서 나오는 리팩토링의 의미는 단순히 마틴 파울러의 저서인 리팩토링에서 말하는 코드 레벨의 리팩토링 만을 말하진 않는 것으로 보인다. 단순히 코드 레벨에서의 리팩토링이 아닌, 더 큰 범위에서의 리팩토링을 말하고 있다. 회사에서 일을 할 때, 구성원들 끼리의 소통의 원천은 DDD의 맥락에선 모델 입니다. 모델 또한 리팩토링의 대상이다. 책에서는 개선의 의미에서의 refactor 라는 단어로 표현을 하고 있다 구체적으로는 암시적 개념들을 명시적으로 만들기위해서, 도메인 전문가와 지속적인 대화를 할 수 도 있을 것이고, 그 과정에서 만들어진 지식의 체계에 모순점이 생길 수 있는데, 이것을 바로잡는 것도 그 사례일 수 있을 것이고, 누락된 개념을 발견하고 이를 추가하는 것도 사례일 수 있을 것 이다. 이러한 과정을 거침으로써, 모델은 개선 될 것이고, 도메인 전문가, 개발자, PO의 멘탈모델이 이 모델에 그대로 투영될 수 있다면, 무결성을 가진 모델을 작성하는 그 목표를 달성할 수 있을 거라고 생각한다
- 책에서 암시적인 것을 명시적으로 나타내는 방법으로 제약조건(constraint), 절차(process), 명세(specification)을 말하고 있는데, 실제로 개인적으로 도메인 분석에서 사용하고 있는 방식이다 내 개인적으로는 문.해.조.절.검 의 형태로 정의해서 사용하고 있다
- 제약조건(Constraint)와 불변식(Invariant) 용어 간에 어떤 상관관계가 있고 어떻게 다른지 궁금했었는데, 제약조건은 불변식을 실현하기 위한 수단이고, 불변식의 구체적인 것이 제약조건 임을 알게 되었다
- 이 장을 읽으면서, 설계에 대해서도 어떻게 정의를 해야할지를 다시 고민하게 되는 계기가 되었다 설계는 유연해야한다 라는 문장을 보고 애초에 설계라는 작업은 유연성과 확장성을 어떻게 고려해서 가져갈것인가에 대한 고민의 과정과 적용의 결과가 아닐까? 라는 생각이 들었다
- 개인적으로 5장에 나오는 분할된 컨텍스트를 어떻게 나눌 것인가와 더불어서, DDD의 핵심은 도메인 전문가의 머릿속에만 있는 암시적 개념을 어떻게 끄집어 내서, 명시적인 모델로 만들 것인가? 라고 생각한다