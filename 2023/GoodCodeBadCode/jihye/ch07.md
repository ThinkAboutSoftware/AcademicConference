# CHAPTER 7 코드를 오용하기 어렵게 만들라

## 불변 객체로 만드는 것을 고려하라

- 가변 객체는 추론하기 어렵다.
- 가변 객체는 다중 스레드에서 문제가 발생할 수 있다.

> 기본적으론 불변 객체를 만들고, 필요한 곳에서만 가변적이 되도록 만든다.
>

### 가변 클래스는 오용하기 쉽다.

- 해결책
  - 객체를 생성할 때만 값을 할당한다.
  - 불변성에 대한 디자인 패턴 사용
    - 빌더 패턴
    - 쓰기 시 복사 패턴

## 객체를 깊은 수준까지 불변적으로 만드는 것을 고려하라

### 깊은 가변성은 오용을 초래할 수 있다.

- 해결책
  - 방어적으로 복사하라
    - 대신, 복사하는데 비용이 많이 드는 단점과 클래스 내부에서 발생하는 변경을 막아주지 못하는 경우도 많다.
  - 불변적 자료구조 사용

---

### 논의하고 싶은 내용

- 가변성 제약에 대한 글을 찾아보다가 본 문장입니다. “불필요한 가변성을 만들면 안된다. 가변성은 그 자체로 비용이다. 물론 이런 규칙에도 예외가 있을 수 있습니다. 때로는 더 효율적이기 때문에 가변객체를 사용합니다. ”  
  - 위 문장에서 말하는 예외나 더 효율적인 상황에 대해서 이야기 해보고 싶습니다.
    - [출처 글 링크](https://jaehochoe.medium.com/better-kotlin-%EA%B0%80%EB%B3%80%EC%84%B1-%EC%A0%9C%EC%95%BD-b3201b2fabc4)
