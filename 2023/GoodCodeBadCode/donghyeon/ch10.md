# 단위 테스트의 원칙

## 논의
최근 들어서 하게된 생각입니다.
외부 API를 테스트할 때 MockServer를 구축하는 방법과 Stub을 이용하는 방법 중 어떤 것을 선호하시는지 궁금합니다.
또한 둘 중 하나를 선택할 떄 어떤 기준으로 선택하시는지 궁금합니다.

## 1. 단위 테스트 기초
- 테스트 중인 코드(code under test): 실제 코드, 테스트 대상이 되는 코드
- 테스트 코드: 단위 테스트를 구성하는 코드
- 테스트 케이스
	- 준비: 테스트할 특정 동작을 위한 설정
	- 실행: 실제로 호출
	- 단언: 결과 확인
## 2. 좋은 단위 테스트는 어떻게 작성할 수 있는가
- 훼손의 정확한 감지
	- 플래키(flakey): 어쩔 땐 통과, 어쩔 땐 실패, 무작위성, 타이밍 기반 레이스 조건, 위부시스템에 의존
- 세부 구현 사항에 독립적
	- https://shoulditestprivatemethods.com/
- 잘 설명되는 실패
- 이해할 수 있는 테스트 코드
- 쉽고 빠르게 실행

## 3. 퍼블릭 API에 집중하되 중요한 동작은 무시하지 말라
- 중요한 동작이 퍼블릭 API 외부에 있을 수 있다

## 4. 테스트 더블
- 사용하는 이유
	- 테스트 단순화
	- 테스트로부터 외부세계 보호
	- 외부로부터 테스트 보호
- Mock: 클래스, 인터페이스를 시뮬레이션하는데 멤버 함수에 대한 호출을 기록하는 것만 수행
- Stub: 함수가 호출되면 미리 정해 놓은 값을 반환. 보통 목이라고하면 목, 스텁 둘 다 의미
- 목, 스텁은 문제가 될 수 있다
	- 실제적이지 않은 테스트를 만들 수 있다
	- 테스트가 구현 세부 정보에 유착될 수 있다
- Fake: 클래스의 대체 구현체

## 5. 테스트 철학으로부터 신중하게 선택하라
- TDD
- BDD
- ATDD