# Ch05. 가독성 높은 코드를 작성하라

## 중요 문장

### 1. 서술형 명칭 사용

### 2. 주석문의 적절한 사용

- 클래스와 같이 큰 단위의 코드가 무엇을 하는지 요약하는 높은 수준에서의 주석문은 유용하다. 그러나 하위 수준에서 한 줄 한 줄 코드가 무엇을 하는지 설명하는 주석문은 가독성을 높이기 위한 효과적인 방법이 아니다
- 코드의 기능을 설명하기 위해 낮은 층위의 주석문을 많이 추가해야 한다면, 이것은 코드 자체의 가독성이 떨어진다는 신호다.
- 코드가 왜 그 일을 하는지에 대한 이유나 배경을 설명하는 주석문은 유용할 떄가 많은데, 코드만으로는 이를 명확히 할 수 없기 때문이다.
- 문서가 중요하지만 개발자들이 읽지 않는 경우가 많다는 사실에 현실적으로 대처해야 한다. 따라서 예측대로 실행되고 오용을 방지하는 코드를 작성하려고 할 때, 문서나 주석문에 너무 많이 의존하지 않는 거싱 바람직 하다.

### 3. 코드 줄 수를 고정하지 말라

- 간결하지만 이해하기 어려운 코드는 피하라
- 코드가 이해하기 쉬워야 하고, 어떤 상황에서도 잘 동작하며, 문제가 되는 동작을 할 가능성은 없는지 확인하는 것이다. 이것을 효과적으로 하기 위해 더 많은 코드가 필요하다면 그것은 문제가 되지 않는다.

### 4. 일관된 코딩 스타일을 고수하라

- 팀이나 조직 전체가 같은 코딩 스타일을 따르면, 그것은 마치 모두가 같은 언어를 유창하게 말하는 것과 비슷하다. 서로 오해할 위험이 크게 줄어들고, 이로인해 버그가 줄어들고, 혼란스러운 코드를 이해하는데 낭비하는 시간이 줄어든다

### 5. 깊이 중첩된 코드를 피하라

- 코드를 읽을 때, 다른 논리가 실행되는 때를 정확히 이해하기 어렵다. 중첩이 깊어지면 가독성이 떨어지기 때문에 중첩을 최소화하도록 코드를 구성하는 것이 바람직하다.

### 6. 함수 호출도 가독성이 있어야 한다

### 7. 설명되지 않은 값을 사용하지 말라

- 설명이 없는 값은 다른 개발자들이 그 값이 왜 거기에 있고, 무슨 일을 하는지 이해하지 못하기 때문에 코드의 가독성을 떨어트린다.

### 8. 익명 함수를 적절하게 사용하라

- 간단하고 자명한 것에 익명함수를 사용하면 코드의 가독성을 높여 주지만, 복잡하거나 자명하지 않은 것 혹은 재사용해야 하는 것에 사용하면 문제가 될 수 있다.
- 복잡한 논리는 명명함수를 쓰는 것이 이점이 더 많다.

### 9. 프로그래밍 언어의 새로운 기능을 적절하게 사용하라

- 무언가를 직접 만드는 대신 언어에서 제공하는 기능을 사용하면 코드가 최적화되어 효율적이고 버그가 없을 가능성이 커진다
- 새로운 기능을 사용하면 큰 이점이 있을 수 있지만 코드 작성에서와 동일하게 해당 기능이 단지 새로워서가 아니라 작업에 적합한 도구이기 때문에 사용한다는 점을 분명히 해야 한다.

## 내 생각

- a, b, x, y, z 같은 변수 혹은 함수명을 쓰는 것보다 확실히 서술적인 이름이 코드 읽기 훨씬 편하다 코드가 글 처럼 읽혀야 한다는 말을 자주 듣는데,  이 말과 같은 맥락으로 이해할 수 있다
- 나 같은 경우에 주석을 코드로 표현하지 못하는 것을 표현해야만 할 때 활용한다 주로, 부가적인 설명이 없으면, 코드 읽는 사람이 왜곡해서 해석할 가능성이 있을 때도 활용한다. 물론, 주석은 부가정보이고, 유지보수의 대상이기 때문에 지나치게 의존하면, 수정사항이 생겼을 때, 매번 같이 수정해야한다던지 혹시나 수락을 누락했을 때, 다른 사람이 잘못이해해서 실수를 할 수도 있기 때문에 보조 용도로 활용하는게 맞다고 생각한다
- 개인적으로는 주석을 상세히 쓰기 보다는 도메인에 대한 내용 및 정책은 정책서 혹은 문서 상에 남겨두려고 하는 편이다(책임의 분리)
- 코드 라인 수가 적을 수록 가독성이 증가 한다는 말이 틀리다는 것은 백준 숏코드 풀이를 몇개만 보더라도 알 수 있다 그렇다고 코드 라인 수가 많다고해서 가독성이 증가하는 것도 아니다 즉, 코드 라인 수의 많고, 적음이 실질적인 가독성이 좋고 나쁨의 지표는 아님을 알 수 있다 책에서 말한 것처럼 물론 짧은게 더 이해하기 쉽고 좋지만, 그렇다고 억지로 짧게 하려고 할 필욘 없다는 것이다 주객이 전도 되지 않도록 해야한다
- 가독성을 위해서 일관된 스타일은 너무나도 당연하다 파이썬 개발을 하면서는 black 이라는 formatter를 쓰고 있다 pre-commit hook 을 통해서, 커밋전에 포맷팅을 자동으로 해준다 추가로 개인적으로는 코드 구조의 일관성도 필요하다고 생각한다 구조가 일관되게 작성되어있다면 여러사람이 작업하더라도 큰 틀에서의 코드는 비슷하게 갈 수 있기 때문이다
- 회사 프로젝트를 진행하면서, 일관된 코딩 스타일을 유지했을 때 많은 장점이 있음을 알 수 있었다. 일단 코드리뷰를 볼 때, 전체 구조를 빠르게 파악할 수 있다. API 선언부는 여기 있을것이고, 비즈니스로직은 여기 구현되어있을 것이고, 도메인 로직은 여기 있을것이고.. 등등 예상이 되기 때문이다. 그리고 내가 코드를 작성할 때도 한번 구조를 잘 잡아두면, 그 선을 벗어나지 않으면서 고민하는데 큰 시간을 들이지 않을 수 있다
- 개인적으로 중첩에는 좀 민감한 편이다 그래서 중첩이 안생기도록 최대한 나누려고 노력한다 단순한 이중 루프 까지는 괜찮은데, 이중 루프 안에 조건문이 너무 많을 때는 되도록 나누려고 하고 있다. 가끔씩은 도메인 자체가 복잡해서 어쩔 수 없이 코드가 복잡해지는 경우가 있는데, 상황에 따라 다를 수 있겠지만 메소드 추출을 하여서, 자세한 구현은 숨기는 편이 오히려 가독성에 더 좋은 영향을 줄 수 있다고 생각한다
- 함수 호출에서의 가독성을 지키기 위해서, 파이썬에서는 타입힌트를 적극 활용해주는 편이다 mypy를 통해서, 실질적인 컴파일러 돌리듯이 활용할 수도 있고, 무엇보다 코드를 읽을 때, 타입이 있고, 없고가 차이가 많이 나기 때문이다. 책에 있는 예제를 파이썬 코드로 조금 고쳐보면 아래와 같이 작성할 수 있을 것 같다
    
    ```python
    from typing import Annotated
    

    KineticEnergyToJoule = Annotated[
        float, "Value that calculated to Joule from kinetic energy about car"
    ]
    USTon = Annotated[int, "Unit of weight used in the United States"]
    MilePerHour = Annotated[int, "Miles per hour (mph, m.p.h., MPH, or mi/h)"]
    
    
    class Vehicle:
        KILOGRAMS_PER_US_TON: float = 907.1847
        METERS_PER_SECOND_PER_MPH: float = 0.44704
    
        def __init__(self, us_ton: USTon, mph: MilePerHour):
            self._us_ton = us_ton
            self._mph = mph
    
        def get_kinetic_energy_j(self) -> KineticEnergyToJoule:
            m = self._get_m()
            v = self._get_v()
    
            return 0.5 * m * (v**2)
    
        def _get_m(self) -> float:
            return self._us_ton * self.KILOGRAMS_PER_US_TON
    
        def _get_v(self) -> float:
            return self._mph * self.METERS_PER_SECOND_PER_MPH
    ```
    
- 파이썬에서는 익명함수를 lambda 키워드를 이용해서 사용할 수 있다 책에서 나온 것 처럼 익명함수는 간단한 로직에서는 유용하게 활용될 수 있지만, 로직이 복잡할 수록, 명명된 함수로 추출해서 쓰는 것이 훨씬 가독성에 도움이 된다 lambda를 여기저기 많이 활용하는 것은 파이썬 기준으로도 좋지 않은 코드에 속한다고 볼 수 있을 것 같다 다만 예외의 경우는 정렬 혹은 map 에서의 key 역할로는 그나마 많이 쓰이는 것 같다
    
    ```python
    In [4]: sorted(some_map.items(), key=lambda x: x[1]) # value 기준으로 정렬
    Out[4]: [('a', 1), ('b', 2), ('e', 3), ('d', 4), ('c', 5)]
    
    In [5]: def order_by_value(x: list[int]) -> int:
       ...:     return x[1]
    
    In [6]: sorted(some_map.items(), key=order_by_value) # value 기준으로 정렬 / 명명함수 활용
    Out[6]: [('a', 1), ('b', 2), ('e', 3), ('d', 4), ('c', 5)]
    ```
    

## 질문

1. `프로그래밍 언어의 새로운 기능을 적절하게 사용하라` 부분은 이 챕터에서 제시한 나머지 가독성을 높이는 방법과는 맥락이 좀 다른 것 같은데요 본인이 최근에 회사 혹은 개인 프로젝트를 하면서, 겪어본 `새로운 기능` 이 있다면, 어떤 것이 있었고 어떤 점이 좋았는지(꼭 가독성이 아니더라도?) 공유해보면 좋을 것 같습니다