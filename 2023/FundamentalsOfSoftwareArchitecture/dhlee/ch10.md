## 10. 레이어드 아키텍처 스타일

## 논의
책에서 소개한 싱크홀 안티패턴을 해결하는 방법외에 자신만의 해결방법이 있다면 공유해보면 좋을 것 같습니다

## 내용
- 토폴로지
	- 내부 컴포넌트는 논리적으로 수평한 레이어들로 구성
	- 각 레이어는 주어진 역할을 수행
	- 일반적으로 프레젠테이션, 비즈니스, 퍼시스턴스, 데이터베이스의 4개 표준 레이어로 구성
	- 컴포넌트를 도메인 단위로 묶는게 아니라, 아키텍처의 기술 역할(계층)에 따라 묶음
	- 비즈니스 도메인이 각각 모든 레이어에 분산 되므로 도메인 주도 설계 방식과는 잘 맞지 않음
- 레이어 격리
	-  폐쇄 레이어 : 요청이 상위 레이어에서 하위 레이어로 이동하므로 중간의 어떤 레이어도 건너뛸 수 없고 현재 레이어를 거쳐야 바로 그 다음 레이어로 나갈 수 있음
	- 개방 레이어 : 다른 레이어를 건너 뛰고 다음 레이어로 나갈 수 있음
- 레이어 추가
	- 어떤 레이어는 개방하는 것이 더 합리적인 경우도 있음
	- 레이어의 개방/폐쇄 여부를 정확히 문서화하여 소통해야 함
- 기타 고려사항
	- 아키텍처 스타일을 완전히 결정하지 못했다면, 레이어드 아키텍처는 좋은 출발점이 될 수 있음
	- 아키텍처 싱크홀 안티패턴 : 요청이 한 레이어에서 다른 레이어로 이동할 때 각 레이어가 아무 비즈니스 로직도 처리하지 않고 그냥 통과 시키는 안티 패턴으로 불필요한 객체 초기화 및 처리를 빈번하게 유발하고 쓸데 없이 메모리를 소모하며 성능에도 부정적인 영향을 끼침으로 피해야 함
	- 요청의 20%가 싱크홀인 정도면 그런대로 괜찮은 수준이지만, 그 이상이 된다면 레이어드 아키텍처는 스타일이 아님
	- 싱크홀 안티패턴을 해결하는 하나의 방법은, 모든 레이어를 개방하는 것인데 그렇게 되면 격리가 되지 않기 때문에 변경 관리의 어려움이 증가 함
- 왜?
	- 예산과 일정이 빠듯한 경우 출발점으로 괜찮음
	- 규모가 커질수록 유지 보수성, 민첩성, 시험성, 배포성 같은 아키텍처 특성이 점점 나빠짐
- 특성 등급
	- 단순성 : 전체 비용과 단순성이 주요 강점
	- 배포성 : 절차가 까다롭고 리스크가 높으며, 자주 배포할 수 없기 때문에 배포성은 떨어짐
	- 시험성 : 시험성도 낮음. 하지만 컴포넌트를 모킹 또는 스터빙 할 수 있음
	- 신뢰성 : 분산 아키텍처에서 일반적인 네트워크 트래픽, 대역폭, 레이턴시 문제는 덜 하므로 신뢰성은 보통이지만, 모놀로식 배포 속성상 배포 리스크 측면에서 점수가 낮음
	- 탄력성, 확장성 : 모놀로식 배포와 아키텍처 측면에서 모듈성이 부족
	- 성능 : 폐쇄적인 레이어 구조와 싱크홀 아키텍처 안티패턴 때문에 고성능 시스템에 어울리지 않음