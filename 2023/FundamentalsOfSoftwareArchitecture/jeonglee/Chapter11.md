## 11. 파이프라인 아키텍처 스타일

파이프라인 아키텍처 스타일은 소프트웨어 아키텍처에서 끊임없이 등장하는 기본적인 아키텍처 스타일이다.

개발자와 아키텍트가 기능을 개별로 분리하기로 결정하는 순간부터 이 패턴이 수반된다.

이 아키텍처는 Bash, Zsh같은 유닉스 터미널 쉘 언어의 기초 원리이다..!?

함수형 언어 개발자는 언어 구조와 이 아키텍처 요소가 유사하다고 생각할 것이다.

사실 맵리듀스 프로그래밍 모델을 응용한 많은 도구가 이 기본 토폴로지를 따른다.

따라서 이 스타일은 저수준, 고수준 모두에서 사용할 수 있다.

### 11.1 토폴로지

파이프라인 아키텍처는 다수의 파이프와 필터로 구성된다.

파이프와 필터는 특정한 방식으로 조정되며, 보통 필터 간 단방향 통신은 점대점 방식으로 구성한다.

#### 11.1.1 파이프

파이프는 한 소스에서 입력을 받아 다른 소스로 출력을 내는, 필터 간 통신 채널이다.

파이프는 성능상의 이유로 보통 단방향, 점대점 방식으로 구성한다.

#### 11.1.2 필터

필터는 자기 완비형이고, 다른 필터와 독립적이며, 일반적으로 무상태성이다.

필터는 한 가지 테스크만 수행하므로 복합 테스크는 여러 필터를 이어 붙여 처리하면 된다.

파이프라인 아키텍처 스타일에서 필터는 다음 네 가지 종류가 있다.

- 프로듀서
  - 프로세스의 시작 점으로 아웃바운드 만 있어서(들어오는 트래픽은 없고 나가는 트래픽만 있다) 소스라고도 한다.
- 변환기
  - 입력을 받아 필요시 일부 또는 전체 데이터를 반환한 후, 그 결과를 아웃바운드 파이프로 전달한다.
  - 이 기능을 함수형 프로그래밍에서는 `맵`이라고 부른다.
- 테스터
  - 입력을 받아 하나 이상의 기준에 대해 테스트를 하고 그 결과에 따라 필요시 결과를 생산한다.
  - 이 기능을 함수형 프로그래밍에서는 `리듀스`이라고 부른다.
- 컨슈머
  - 파이프라인 흐름의 종착역이다.
  - 컨슈머는 파이프라인 프로세스의 최종 결과를 데이터베이스에 저장하거나 유저 인터페이스에 표시한다.

각 파이프와 필터는 단방향이고 워낙 단순해서 얼마든지 조합할 수 있다(모듈성)

### 11.2 예제

파이프라인 아키텍처 패턴은 다양한 애플리케이션과 특히 간단한 단방향 처리 태스크에서 흔히 찾아볼 수 있다.

전자 데이터 교환(EDI)도구,ETL도구 등이 대표적이다.

### 11.3 아키텍처 특성 등급

파이프라인 아키텍처 스타일은 애플리케이션 로직을 필터 타입에 따라 나누는, 기술 분할 아키텍처이다.

보통 모놀리식 형태로 구현/배포하므로 아키텍처 퀀텀은 언제나 1이다.

이 아키텍처의 주요 강점은 모듈성과 결부된 전체 비용 및 단순성이다.

원래 모놀리식에 가깝기 때문에 분산 아키텍처에 수반되는 복잡도가 없고, 단순해서 알기 쉽고 구축 및 유지보수 비용도 비교적 적게 든다.

평균 수준으로 매긴 배포성, 시험성은 필터를 통한 모듈성이 더 우수하므로 레이어드 아키텍처보다는 조금 낫다.

그래도 이 아키텍처 스타일은 모놀리식라서 절차, 리스크, 배포 빈도, 테스트 완성도의 영향을 받는다.

레이어드와 마찬가지로 분산 아키텍처에서 자주 목격되는 네트워크 트래픽, 대역폭 부족, 레이턴시 탓에 전체 신뢰성은 중간정도이다.

이 아키텍처는 탄력성과 확장성은 모놀리식 배포 때문에 점수가 낮고 내고장성도 별로다.

### 느낀점

교조주의, 이게 최고야에 빠지는 경우가 해당 아키텍처가 유리한 상황에서만 개발을 해서 그런 것 같다고 느낀 것 같다.

다른 시스템이나 아키텍처를 둘러보면 트레이드 오프가 당연하지만 트레이드 오프를 생각하지 못하고 시야가 좁아지는 것 같다.

#### 논의사항
