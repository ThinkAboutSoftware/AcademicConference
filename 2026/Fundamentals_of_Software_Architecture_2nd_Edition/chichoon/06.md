## Chapter 07: 서비스 세분도

### 개요

- 세분도: 작게 나눈 서비스들의 사이즈 정도

### 세분도 분해인

- 서비스를 작게 나눠야 하는 이유
- 서비스의 범위와 기능
  - 서비스가 하는 일의 크기와, 컴포넌트의 사이즈
  - 서비스로 나눠지는 기준이 사람마다 다르고, 개발자는 서비스를 최대한 작게 나누려는 성향이 있기 때문에 서비스의 범위를 꼭 고려해야 한다
- 코드 변동성
  - 소스 코드를 변경하는 빈도
  - 자주 변경되는 기능을 영향력이 적은 단일 서비스로 묶으면 타 기능에 끼치는 영향이 작아지기 때문에 테스트에 용이
- 확장성 + 처리량
  - 처리량을 달성하기 위해 서비스를 확장할 필요가 있음
  - 서비스를 적절히 쪼개 다양한 처리량 목표를 달성하게 할 수 있다
- 내고장성
  - 데이터베이스와 마찬가지로 하나의 도메인에 장애가 발생해도 다른 곳에 영향을 끼치지 않게끔 하는 것이 중요하다
- 보안
  - 민감한 데이터를 다른 서비스가 접근하지 못하게 보호
  - 데이터 저장 뿐만 아니라 데이터 접근도 보안에 큰 영향을 끼친다
- 신장성
  - 현재 기능에서 새로운 기능이 추가될 경우 리스크를 작게 만들어야 함

### 세분도 통합인

- 서비스를 합쳐서 크게 만들어야 하는 이유
- 데이터베이스 트랜잭션
  - 데이터베이스와 비슷하게, 서로 다른 서비스끼리 데이터 공유가 잦은데 도메인이 분리되어 있을 경우 트랜잭션 적용이 어렵다
  - 이런 경우 통합하는 것이 좋다
- 워크플로우와 코레오그래피
  - 기능간 결합도를 확인하고, 단단히 결합되어 있을 경우 전체 내고장성 보장을 위해 굳이 분리하지 않는 것도 방법
  - 데이터 일관성과 무결성을 중시한다면 서비스 통합도 대안이 된다
- 공유 코드
  - 서비스들 간 코드를 공유해야 하는지 여부
  - 서비스가 분리되어 있을 경우 라이브러리나 코드 변경시 이를 사용하는 모든 서비스를 찾아서 같이 수정해야 함
  - 이 경우 서비스를 통합하는 게 방법일 수 있다
- 데이터 관계
  - 서비스 간 데이터는 공유되지 않고 엄격한 콘텍스트로 나눠져 있으므로 서비스간 통신이 잦을 경우 이 서비스를 합치는 게 나을 수도 있다

### 적정 균형점 찾기

- 분해인과 통합인을 고려하여 트레이드오프를 결정해야 함
