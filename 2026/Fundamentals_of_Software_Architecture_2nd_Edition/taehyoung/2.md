![ch02_논의주제](./images/ch02_논의주제.png)

## 논의 주제
    - MSA 설계 시에, 본인이 생각하는 적절한 MS 사이즈의 기준이 있다면 공유해보면 좋을거 같다
        - 나의 답변
            - 개인적으로 MSA의 가장 어려운 점은 크기를 어떻게 나눌 것인가 였다. 현재 상황에서는 적절한 크기라고 생각했는데, 이후에는 적절하지 않은 크기 였던 적도 있었기 때문에, 애초에 적절한 MS 크기라는 것은 상황에 따라서 계속 변화될 수밖에 없는 거 아닌가? 라는 생각도 들었다

## 내용 요약
    - 무작정 잘게 쪼개기만 하면 오케스트레이션과 트랜잭션, 비동기성 등이 큰 문제가 된다
    - 기존 분산환경과 MSA 의 다른점은 BC의 유무라고 볼 수 있고, 아키텍쳐의 관심사에 데이터 영역까지 들어오게 되면서, 더 의사결정을 내리기 어려워진 것으로 볼 수 있다
    - 마이크로서비스에서 가장 어려운 부분
        - 마이크로서비스의 사이즈
        - 통신방식
    - 아키텍쳐 퀀텀
        - 특징
            - 독립적 배포가능
            - 높은 기능 응집도
            - 높은 정적 커플링
            - 동적 퀀텀 커플링
        - 정적 퀀텀 커플링
            - 꼭 DB가 아니더라도, 서비스를 작동시키기 위해서 필요한 의존성들 모두가 정적퀀텀 커플링으로 볼 수 있음
        - 동적 퀀텀 커플링
            - 통신
                - 동기
                - 비동기
            - 일관성
                - 트랜잭션
                - 최종 일관성
            - 조정
                - 오케스트레이션
                - 코레오그래피
## 내 의견
    - 오선빈 아키텍트가 말한 사가패턴을 팀원들이 안 쓰려고 한 이유는 무엇일까? 에 대한 답은 너무 명확하다 닭 잡는데 소 잡는 칼을 쓸 것인가를 판단해봤을 때, 닭 잡는 칼을 쓰는 게 낫다고 판단했기 때문이다 아키텍쳐 결정 시에 단순히 기술적으로 적용 가능한지 여부를 떠나서, 다양한 요소들을 고려해야하는데, 그런 고려사항들을 놓친 게 아닐까 싶다.
    - 각 상황에 따라 어떤 정답이 있는 것도 아니고, 최초 의사결정 때의 상황을 기준으로 아키텍쳐 의사 결정을 하더라도 상황에 따라서 전혀 예상치 못하게 변경되는 경우가 생기기 때문에, 아키텍처 레벨에서는 일단 시도해보고, 실패 혹은 성공을 통해서 배우는 방법밖에 없고, 그래서 학습비용이 비싼 게 아닐까 생각된다
    - 커플링은 의존성으로도 볼 수 있다
    - 아키텍쳐 퀀텀은 사실상 DB에 얼만큼 의존하고 있는지에 따라 갈리는데, 그래서 DB는 1개를 쓰면서, 여러 개의 MS로 나눴다고 하는 서비스들은 사실상 MSA 라고 보기보다는 분리된 모놀리식으로 보는 게 맞다는 생각이고 책에서는 서비스 기반 아키텍쳐라고 말하고 있다
    - 아키텍쳐 퀀텀이 1인 게 개인적으로 나쁘다고 생각하지는 않는 이유는, MSA를 경험해보면서, 너무 많은 MS 간 통신을 제어하고 메세지 유실과 분산 트랜잭션 등을 고민하는 비용이 너무 컸기 때문이다. 아키텍쳐 퀀텀이 1일 때의 분명한 단점은 동일한 서버가 여러 대이든, 도메인별로 분리된 서버가 여러 대이든, RDB에 SPOF가 있다는 점이다 but, 서비스 자체에 트래픽이 많지 않고, 서비스 유지보수할 인원도 적은 상태에서, DB로 인한 가용성/내고장성의 영향이 크지 않다면, 그냥 MSA를 애초에 고려하지 않는 것도 한 가지 방법이라고 생각한다
    - 실제로 회사에서 이벤트 드리븐 기반의 MSA 설계 및 개발을 진행하면서, 느낀점은 MSA를 하면서, 얻는 이점도 분명히 있지만, 그에 따른 단점도 매우 크다는 점이 였다. 같은 서비스 였다면, 그냥 함수 호출 한 번으로 끝났을 일이, 이벤트를 정의하는 것부터, 적용하는 것까지, 관련된 MS 담당자들이 모두 챙겨야 하는 게 번거롭다고 생각한 적이 있었다(여기에 의견이 일치하지 않을 때, 병목이 생기는 것은 덤이고..), 또한 이벤트가 유실되었을 때 어떻게 할 것인지, 이벤트 수행이 실패했을 때, 롤백은 어떻게 처리할 것인지 등등 고려해야 할 것들이 너무 많았던 걸로 기억한다
